{{ "<!-- Theme Code -->" | safeHTML }}
{{- if $.Scratch.Get "react" }}
  <script>
    if (!window.synaPortals) {
      window.synaPortals = {};
    }
  </script>
{{- end -}}

{{- partial "custom/js.html" . -}}
{{- $main_script_template := resources.Get "scripts/syna-main.js" -}}
{{- $main_script := $main_script_template | resources.Minify | resources.Fingerprint -}}
<script src="{{ $main_script.RelPermalink }}"></script>
{{- range uniq ($.Scratch.Get "js") -}}
  {{- $script_template := resources.Get (printf "scripts/%s" .) -}}
  {{- $script := $script_template | resources.Minify | resources.Fingerprint }}
  <script src="{{ $script.RelPermalink }}" async defer></script>
{{- end -}}
{{- template "_internal/google_analytics_async.html" . -}}

{{- if .Site.Params.analytics.piwik -}}
  {{- partial "_analytics/piwik.html" . -}}
{{- end -}}
